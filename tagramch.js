module.exports = {
  name: 'ุชุญุฑูุด',
  command: ['ุชุญุฑูุด'],
  category: 'ุงูููุงุณุฉ',
  description: 'ูููุฏ ููุงู ูุณุฎ +18 ููููุดู ุงูุดุฎุต ุงููู ุฑุฏูุช ุนููู ุฃู ููุดูุชู ๐',
  args: [],
  hidden: false,

  execute: async (sock, m, args) => {
    const groupId = m.key.remoteJid;

    // ุงุฌูุน ูู ุงููู ูููู ูููููุง ูุณุชูุฏููู
    let targets = [];
    const quoted = extractQuotedJid(m);
    if (quoted) targets.push(quoted);

    const mentions = m.message?.extendedTextMessage?.contextInfo?.mentionedJid || [];
    targets.push(...mentions);

    // ุฅุฒุงูุฉ ุงูุชูุฑุงุฑ
    targets = [...new Set(targets)];

    if (targets.length === 0) {
      return sendMessage(sock, groupId, 'โ ูุงุฒู ุชุฑุฏ ุนูู ุฑุณุงูุฉ ุฃู ุชููุดู ุญุฏ ุนุดุงู ุฃุชุญุฑูุด ุนููู ๐');
    }

    // ููุงุฆู ุถุฎูุฉ ููุชูููุฏ
    const templates = [
      "๐ ูุง {ูุตู} ููุณู {ูุนู} ุฌุณูู {ููุงู}",
      "๐ฅ {ูุตู} ุชุนุงู ุฎูููู {ูุนู}ู {ููุงู}",
      "๐ ุนุงูุฒ {ูุนู}ู ูุง {ูุตู} {ููุงู}",
      "๐ฅต ูุด ูุงุฏุฑ ุฃูุงูู ููุฑุฉ ุฅูู {ูุนู}ู {ููุงู} ูุง {ูุตู}",
      "๐ {ูุตู} ููุณู ุฃุนูู ูุนุงู ุญุงุฌุงุช ูุญุฏุด ุนูููุง {ููุงู}",
      "๐ ุชุฎููู ูุงูุช {ูุนู}ูู {ููุงู} ูุง {ูุตู}",
      "๐ฆ ุฏูุงุบู ูุดุบููุฉ ุจููุฑุฉ ุฅูู {ูุนู}ู {ููุงู}",
      "๐คญ ูู ุงูุชู ุงูุฌูููุง ุญูุงูู ูุงู ุจุชุงุนู ููู ููุง ุดุงูู"
    ];

    const ุงูุตุงู = [
      "ุญุจูุจู", "ูุง ูุงุฑ ููุจู", "ูุง ุนุณู", "ูุง ุฌุงูุฏ", "ูุง ุณุงุญุฑ",
      "ูุง ููุฑ", "ูุง ุฏูุงุฑ", "ูุง ุฎุทูุฑ", "ูุง ุนูุฑูุช", "ูุง ููุนูู"
    ];

    const ุงูุนุงู = [
      "ุฃุญุถู", "ุฃูุญุณ", "ุฃุฏูู", "ุฃูุณุฑ", "ุฃูุนุจ ูู", "ุฃุนุถ", "ุฃุดู",
      "ุฃูุณุญ ุนูู", "ุฃุชุณูู", "ุฃููุฏ", "ุฃุฏูู ูุดู ูู", "ุฃุฏุบุฏุบ", "ุฃูุฑุจ ุฃูุชุฑ ูู"
    ];

    const ุงูุงูู = [
      "ูู ุงูุณุฑูุฑ", "ุนูู ุงูููุจุฉ", "ุฌูุจ ุงูุดุจุงู", "ูู ุญุถูู", "ุชุญุช ุงูุบุทุง",
      "ูุฑุง ุงูุจุงุจ", "ูุณุท ุงููุทุจุฎ", "ุฌูุจ ุงูุชูุงุฌุฉ", "ุนูู ุงูุฃุฑุถ", "ูู ุงูุญูุงู"
    ];

    // ูููุฏ ุฌููุฉ ูุณุฎุฉ ููู ูุณุชูุฏู
    for (const target of targets) {
      let haramText = "";

      // ุฅุฐุง ุทูุนุช ุงูุฌููุฉ ุงูุฎุงุตุฉ ุนู ุงูุฌูููุงุ ูุญุทูุง ุซุงุจุชุฉ
      if (Math.random() < 0.2) { // 20% ุงุญุชูุงู
        haramText = "๐คญ ูู ุงูุชู ุงูุฌูููุง ุญูุงูู ูุงู ุจุชุงุนู ููู ููุง ุดุงูู";
      } else {
        // ุชูููุฏ ูู ุจุงูู ุงูููุงูุจ
        const template = templates[Math.floor(Math.random() * (templates.length - 1))]; // -1 ุนุดุงู ูุง ููุฑุฑ ุงูุฌูููุง
        const ูุตู = ุงูุตุงู[Math.floor(Math.random() * ุงูุตุงู.length)];
        const ูุนู = ุงูุนุงู[Math.floor(Math.random() * ุงูุนุงู.length)];
        const ููุงู = ุงูุงูู[Math.floor(Math.random() * ุงูุงูู.length)];

        haramText = template
          .replace("{ูุตู}", ูุตู)
          .replace("{ูุนู}", ูุนู)
          .replace("{ููุงู}", ููุงู);
      }

      await sock.sendMessage(groupId, {
        text: `*${haramText}*\n\n๐ @${target.split('@')[0]}`,
        mentions: [target]
      }, { quoted: m });
    }

    await sendMessage(sock, groupId, '๐ ูู ุนุงูุฒ ุฃูุณุฎ ูู ูุฏู ููู ูู ๐ฅ', m);
  }
};

// === ุฏูุงู ูุณุงุนุฏุฉ ===

function extractQuotedJid(m) {
  return m.message?.extendedTextMessage?.contextInfo?.participant || null;
}

async function sendMessage(sock, jid, text, quoted = null) {
  await sock.sendMessage(jid, { text, ...(quoted && { quoted }) });
}