const cases = [
  {
    crime: "🕵️‍♂️ تم العثور على شخصية أنمي مشهورة مقتولة في غابة مهجورة!",
    suspects: ["إيتاشي", "لايت", "هيسوكا", "ليفاي"],
    killer: "لايت"
  },
  {
    crime: "💀 وُجدت شخصية ميتة في أحد الأبراج العالية بعد سقوطها الغامض.",
    suspects: ["كاكاشي", "لوفي", "إرين", "ماكوتو"],
    killer: "ماكوتو"
  },
  {
    crime: "🔪 قُتلت شخصية في مطبخ القصر باستخدام سكين!",
    suspects: ["ميكاسا", "هيناتا", "شينوبو", "أكازا"],
    killer: "شينوبو"
  },
  {
    crime: "🩸 جريمة غريبة حدثت في مهرجان أنمي... الضحية قُتلت وسط الحشود!",
    suspects: ["سايتاما", "زورو", "باجي", "إيتشيغو"],
    killer: "باجي"
  },
  {
    crime: "🎭 تم العثور على جثة في المسرح! والجميع كان يرتدي أقنعة.",
    suspects: ["كيليوا", "لاو", "شيسوي", "توغورو"],
    killer: "شيسوي"
  },
  {
    crime: "🕳️ جريمة في قطار سريع! أحد الركّاب اختفى فجأة ووجدت جثته!",
    suspects: ["جين", "كورابيكا", "ريوكا", "إينوسكي"],
    killer: "جين"
  },
  {
    crime: "🌊 تم اكتشاف جثة تطفو فوق سطح البحر قرب الجزيرة.",
    suspects: ["لوفي", "نامي", "سانجي", "أوروتشيمارو"],
    killer: "نامي"
  },
  {
    crime: "⚔️ تم قتل أحد المحاربين في غرفة التدريب!",
    suspects: ["زورو", "إيتاشي", "ريوك", "غوجو"],
    killer: "إيتاشي"
  },
  {
    crime: "👁️ جريمة وقعت في منزل غامض، وكاميرات المراقبة تعطلت فجأة.",
    suspects: ["كانا", "لايت", "كيلوا", "شينرا"],
    killer: "لايت"
  },
  {
    crime: "💣 انفجار ضخم أدى إلى مقتل شخصية رئيسية في اجتماع سري.",
    suspects: ["باين", "مادارا", "إيتشيغو", "توبي"],
    killer: "توبي"
  },
  {
    crime: "💔 تم تسميم مشروب أحد الشخصيات خلال حفلة.",
    suspects: ["ساكورا", "شينوبو", "هانجي", "نيكو روبين"],
    killer: "شينوبو"
  },
  {
    crime: "🧪 قُتلت شخصية في مختبر تجربة غامض.",
    suspects: ["فرانكي", "كوروسينسي", "ستين", "أوكتاغون"],
    killer: "كوروسينسي"
  },
  {
    crime: "🚗 حادث سيارة مميت، لكن تبين أنه مدبّر!",
    suspects: ["شين", "ران", "كونان", "كايتو كيد"],
    killer: "كايتو كيد"
  },
  {
    crime: "🔐 وُجدت جثة خلف باب مغلق من الداخل!",
    suspects: ["غون", "ليوريو", "هيسوكا", "ميرويم"],
    killer: "هيسوكا"
  },
  {
    crime: "🕸️ قُتلت شخصية في غابة العناكب، ولا أحد رأى شيئًا.",
    suspects: ["كورورو", "فيتان", "باكوغو", "شيسوي"],
    killer: "كورورو"
  }
];

module.exports = {
  command: "حل_القاتل",
  async execute(sock, m) {
    const chatId = m.key.remoteJid;
    const text = m.message?.conversation || m.message?.extendedTextMessage?.text || "";

    // البحث عن وصف الجريمة داخل الرسالة
    const matchedCase = cases.find(c => text.includes(c.crime));

    if (matchedCase) {
      await sock.sendMessage(chatId, {
        text: `🔍 القاتل في هذه الجريمة هو: *${matchedCase.killer}*`
      });
    } else {
      await sock.sendMessage(chatId, {
        text: "❌ لم أتمكن من إيجاد الجريمة. تأكد أنك أرسلت نفس نص الجريمة كما ظهر."
      });
    }
  }
};