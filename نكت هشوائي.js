const fs = require('fs');
const path = require('path');

module.exports = {
  command: ['ุนุดูุงุฆู'],
  description: 'ูุนุฑุถ ููุชุฉ ุนุดูุงุฆูุฉ ูุถุญูุฉ',
  category: 'ุชุณููุฉ',

  async execute(sock, msg) {
    try {
      const chatId = msg.key.remoteJid;

      const jokes = [
        '๐ ูุฑุฉ ูุงุญุฏ ุญุจ ููุณุฑ ุงูุฑูุชูู... ูุณุฑู ููุง ุนุฑู ูุฑุฌุนู.',
        '๐ ูุงุญุฏ ุฏุฎู ูุทุนู ูุงู ููููุชุฑ: ุนูุฏููุง ูุฑุงุฎ ุจุชุชูููุ ูุงูู: ูุฃุ ูุงูู: ุทุจ ูุงุชูู ูุญุฏู ุณุงูุชู.',
        '๐ ูุฑุฉ ูุงุญุฏ ุฌุงุจ ุงูุนูุฏ ูุจู ุงูุนูุฏ... ูุงููู ููุฏู ุฃุฑุฌุนูุ',
        '๐ ูุงุญุฏ ุฅุดุชุฑู ุดุงุญูุ ุฑุงุญ ูุดุญูู.',
        '๐ ูุงุญุฏ ุฑุงุญ ููุฏูุชูุฑุ ูุงูู: ูู ูุง ุฃุดุฑุจ ุดุงู ุฃุญุณ ุจุฃูู ุจุนููู. ุงูุฏูุชูุฑ ูุงูู: ุดูู ุงูููุนูุฉ ุฃูู.',
        '๐ ููู ูุงุญุฏ ุฑุงุญ ูุดุชุฑู ูุธุงุฑุฉุ ูุงูู ุงูุจุงุฆุน: ูุธุฑ ููุง ุดูุณุ ูุงูู: ูุง ุบููู.',
        '๐ ูุฑุฉ ูุงุญุฏ ุฃูู ุณูุฏููุดุฉุ ุงูุณุฏุญ ูููู ุงููู ูุฑุญูู ูุงู ุทูุจ.',
        '๐ ูุงุญุฏ ุบุจู ุดุงู ุฅุดุงุฑู ููุชูุจ ุนูููุง "ุฎุทุฑ ููููุน ุงูุงูุชุฑุงุจ"ุ ุฑุงุญ ูุนุฏ ุฌูุจูุง ูุตุงุฑ ูุตูุญ: ุชุนุงููุง ุจุณุฑุนุฉ ุงูุฎุทุฑ ุทุงูุญ!',
        '๐ ูุฏุฑุณ ุฑูุงุถูุงุช ุฎูู ููุฏ ุณูุงู: +ูุญูุฏ.',
        '๐ ุบุจู ุฑุงุญ ูุญู ูุธุงุฑุงุชุ ุณุฃูู ุงูุจุงุฆุน: ุนุงูุฒ ูุธุงุฑุงุชุ ูุงูู: ูุง ุนุงูุฒ ุณูุนุงุช.',
        '๐ ุงุซููู ูููููู ููุชุ ูุงุญุฏ ูุงุช... ูู ุงูุถุญู.',
        '๐ ูุงุญุฏ ูุงู ูุตุงุญุจู: ุชุฎููู ูู ุงูุฏููุง ุจุฏูู ุจูุงุชุ ูุงูู: ูุงููู ูุง ููู ุดุงุญูุ ููุง ุญูุงูุฉุ ููุง ุชุฑุชูุจุ ููุง ูููู ๐',
        '๐ ููู ูุงุญุฏ ูุชุจ ุนูู ูุจุฑู: ูุง ุชุถุญู! ูููู ุชุฌู ูุฑุงู.',
        '๐ ููุฏ ุณุฃู ุฃุจูู: ููู ุงูููุจููุชุฑ ูุง ูุชุฒูุฌุ ูุงูู: ูุฃูู ููู ูุดุงูู ุชุนุงุฑุถ.'
      ];

      const randomJoke = jokes[Math.floor(Math.random() * jokes.length)];

      const boxedJoke = `
โญโโ โข ๐ ููุชุฉ ุนุดูุงุฆูุฉ โข โโโฎ
โ
โ ${randomJoke}
โ
โฐโโโโโโโโโโโโโโโโโโโโโฏ`;

      const imagePath = path.join(__dirname, '../media/blue.jpg');
      const imageBuffer = fs.existsSync(imagePath) ? fs.readFileSync(imagePath) : null;

      await sock.sendMessage(chatId, {
        text: boxedJoke,
        contextInfo: {
          externalAdReply: {
            title: "๐ ููุชุฉ ุงูููู",
            body: "ุถุญูุฉ ุนูููุฉ ูุน ููุชุฉ ุนุดูุงุฆูุฉ",
            thumbnail: imageBuffer,
            mediaType: 1,
            sourceUrl: "https://t.me/KINGSLO1",
            renderLargerThumbnail: false,
            showAdAttribution: true
          }
        }
      });

    } catch (error) {
      console.error('Error in random joke command:', error);
      if (msg.key?.remoteJid) {
        await sock.sendMessage(msg.key.remoteJid, {
          text: 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชูููุฐ ุงูุฃูุฑุ ุญุงูู ูุฑุฉ ุฃุฎุฑู ูุงุญูุงู.'
        }, { quoted: msg });
      }
    }
  }
};